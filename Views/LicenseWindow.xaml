<Window x:Class="HMI_ScrewingMonitor.Views.LicenseWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Kích hoạt phần mềm - HMI Screwing Monitor"
        Height="500" Width="600"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        WindowStyle="SingleBorderWindow"
        Background="#F5F5F5">

    <Window.Resources>
        <Style x:Key="HeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#2C3E50"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
        </Style>

        <Style x:Key="LabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#34495E"/>
            <Setter Property="Margin" Value="0,10,0,5"/>
        </Style>

        <Style x:Key="TextBoxStyle" TargetType="TextBox">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="BorderBrush" Value="#BDC3C7"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>

        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Background" Value="#3498DB"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#2980B9"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" HorizontalAlignment="Center" Margin="0,0,0,20">
            <TextBlock Text="🔐 Kích hoạt phần mềm"
                      Style="{StaticResource HeaderStyle}"
                      HorizontalAlignment="Center"/>
            <TextBlock Text="HMI Screwing Monitor v1.0"
                      FontSize="14"
                      Foreground="#7F8C8D"
                      HorizontalAlignment="Center"/>
        </StackPanel>

        <!-- Trial Status -->
        <Border Grid.Row="1"
                Background="#FFF3CD"
                BorderBrush="#FFC107"
                BorderThickness="1"
                Padding="15"
                Margin="0,0,0,20"
                x:Name="TrialStatusPanel"
                Visibility="Collapsed">
            <StackPanel>
                <TextBlock x:Name="TrialStatusText"
                          Text="⏰ Bạn đang sử dụng phiên bản dùng thử"
                          FontSize="13"
                          FontWeight="SemiBold"
                          Foreground="#856404"/>
                <TextBlock x:Name="TrialDaysText"
                          Text="Còn 30 ngày dùng thử"
                          FontSize="12"
                          Foreground="#856404"
                          Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- Hardware ID Section -->
        <StackPanel Grid.Row="2">
            <TextBlock Text="1️⃣ Hardware ID (Mã định danh máy tính):"
                      Style="{StaticResource LabelStyle}"/>
            <TextBlock Text="Vui lòng gửi mã này cho nhà cung cấp để nhận license key"
                      FontSize="11"
                      Foreground="#95A5A6"
                      Margin="0,0,0,8"/>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBox x:Name="HardwareIdTextBox"
                        Grid.Column="0"
                        Style="{StaticResource TextBoxStyle}"
                        IsReadOnly="True"
                        FontFamily="Consolas"
                        Background="#ECF0F1"/>

                <Button x:Name="CopyHardwareIdButton"
                       Grid.Column="1"
                       Content="📋 Copy"
                       Click="CopyHardwareId_Click"
                       Style="{StaticResource ButtonStyle}"
                       Background="#27AE60"
                       Margin="10,0,0,0"/>
            </Grid>
        </StackPanel>

        <!-- License Key Section -->
        <StackPanel Grid.Row="3" Margin="0,20,0,0">
            <TextBlock Text="2️⃣ Nhập License Key (Mã kích hoạt):"
                      Style="{StaticResource LabelStyle}"/>

            <TextBox x:Name="LicenseKeyTextBox"
                    Style="{StaticResource TextBoxStyle}"
                    FontFamily="Consolas"
                    FontSize="14"
                    MaxLength="29"
                    CharacterCasing="Upper"
                    TextChanged="LicenseKeyTextBox_TextChanged"
                    ToolTip="Nhập license key theo format: XXXXX-XXXXX-XXXXX-XXXXX-XXXXX"/>
        </StackPanel>

        <!-- Status Message -->
        <Border Grid.Row="4"
                x:Name="StatusMessagePanel"
                Margin="0,15,0,0"
                Padding="12"
                BorderThickness="1"
                Visibility="Collapsed">
            <TextBlock x:Name="StatusMessageText"
                      FontSize="12"
                      TextWrapping="Wrap"/>
        </Border>

        <!-- License Info (when activated) -->
        <Border Grid.Row="5"
                x:Name="LicenseInfoPanel"
                Background="#D4EDDA"
                BorderBrush="#28A745"
                BorderThickness="1"
                Padding="15"
                Margin="0,15,0,0"
                Visibility="Collapsed">
            <StackPanel>
                <TextBlock Text="✅ Phần mềm đã được kích hoạt"
                          FontSize="14"
                          FontWeight="Bold"
                          Foreground="#155724"/>
                <TextBlock x:Name="LicenseCompanyText"
                          Text="Công ty: ABC Company"
                          FontSize="12"
                          Foreground="#155724"
                          Margin="0,8,0,0"/>
                <TextBlock x:Name="LicenseExpiryText"
                          Text="Hết hạn: Vĩnh viễn"
                          FontSize="12"
                          Foreground="#155724"
                          Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- Buttons -->
        <StackPanel Grid.Row="6"
                   Orientation="Horizontal"
                   HorizontalAlignment="Right"
                   Margin="0,20,0,0">
            <Button x:Name="ActivateButton"
                   Content="🔓 Kích hoạt"
                   Click="Activate_Click"
                   Style="{StaticResource ButtonStyle}"
                   Background="#28A745"
                   Width="120"/>
            <Button x:Name="CancelButton"
                   Content="❌ Đóng"
                   Click="Cancel_Click"
                   Style="{StaticResource ButtonStyle}"
                   Background="#6C757D"
                   Width="100"/>
        </StackPanel>
    </Grid>
</Window>
